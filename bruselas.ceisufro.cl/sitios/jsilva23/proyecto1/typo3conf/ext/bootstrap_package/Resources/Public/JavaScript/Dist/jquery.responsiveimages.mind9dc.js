!function(n){var t,r,s=function(t){this.viewportWidth=0,this.viewportHeight=0,this.options=n.extend({},s.DEFAULTS,t),this.attrib="src",this.update()};s.DEFAULTS={breakpoints:{0:"extrasmall",768:"small",992:"medium",1200:"large"}},s.prototype.viewportW=function(){var t=document.documentElement.clientWidth,i=window.innerWidth;return this.viewportWidth=t<i?i:t},s.prototype.viewportH=function(){var t=document.documentElement.clientHeight,i=window.innerHeight;return this.viewportHeight=t<i?i:t},s.prototype.inviewport=function(t){return!!t&&0<=t.bottom&&0<=t.right&&t.top<=this.viewportHeight&&t.left<=this.viewportWidth},s.prototype.update=function(){this.viewportH(),this.viewportW();var e=this.attrib,o=this.viewportWidth;n.each(this.options.breakpoints,function(t,i){t<=o&&(e=i)}),this.attrib=e},n.fn.viewportH=s.prototype.viewportH,n.fn.viewportW=s.prototype.viewportW;var p=function(t,i){this.$element=n(t),this.options=n.extend({},p.DEFAULTS,i),this.attrib="src",this.loaded=!1,this.checkviewport()};p.DEFAULTS={threshold:0,attrib:"src",skip_invisible:!1,preload:!1},p.prototype.checkviewport=function(){this.attrib!==r.attrib&&(this.attrib=r.attrib,this.loaded=!1),this.unveil()},p.prototype.boundingbox=function(){var t={},i=this.$element[0].getBoundingClientRect(),e=+this.options.threshold||0;return t.right=i.right+e,t.left=i.left-e,t.bottom=i.bottom+e,t.top=i.top-e,t},p.prototype.inviewport=function(){var t=this.boundingbox();return r.inviewport(t)},p.prototype.unveil=function(t){if(!(this.loaded||!t&&!this.options.preload&&this.options.skip_invisible&&this.$element.is(":hidden"))&&(t||this.options.preload||this.inviewport())){var i=this.options[this.attrib]||this.options.src;i&&(this.$element.attr("src",i),this.$element.css("opacity",1),n(window).trigger("loaded.bk2k.responsiveimage"),this.loaded=!0)}},p.prototype.print=function(){this.unveil(!0)};var i=n.fn.responsiveimages;n.fn.responsiveimage=function(o){return(t=this).each(function(){var t=n(this),i=t.data("bk2k.responsiveimage"),e="object"==typeof o&&o;i||(r||(r=new s(e&&e.breakpoints?{breakpoints:e.breakpoints}:{})),e&&e.breakpoints&&(e.breakpoints=null),e=n.extend({},t.data(),e),t.data("bk2k.responsiveimage",i=new p(this,e))),"string"==typeof o&&i[o]()})},n.fn.responsiveimage.Constructor=p,n.fn.responsiveimage.noConflict=function(){return n.fn.responsiveimage=i,this},n(window).on("load.bk2k.responsiveimage",function(){n("img.lazyload").responsiveimage(),n(window).on("scroll.bk2k.responsiveimage",function(){t.responsiveimage("unveil")}).on("resize.bk2k.responsiveimage",function(){r&&r.update(),t.responsiveimage("checkviewport")}).on("beforeprint.bk2k.responsiveimage",function(){t.responsiveimage("print"),n(window).trigger("readytoprint.bk2k.responsiveimage")})})}(jQuery);